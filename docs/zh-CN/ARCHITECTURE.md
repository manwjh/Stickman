# ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

## æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·å±‚                              â”‚
â”‚                   (Web Browser)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ HTTP/HTTPS
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  index.html  â”‚  â”‚   app.js     â”‚  â”‚ animator.js  â”‚  â”‚
â”‚  â”‚   (UIç•Œé¢)   â”‚  â”‚  (ä¸šåŠ¡é€»è¾‘)  â”‚  â”‚  (SVGåŠ¨ç”»)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                  â”‚                  â”‚          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                      i18n.js                             â”‚
â”‚                   (å›½é™…åŒ–æ”¯æŒ)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ REST API (/api/generate)
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚                                â”‚
â”‚              Flask Web Server                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  app.py  (è·¯ç”±ã€è¯·æ±‚å¤„ç†ã€é”™è¯¯å¤„ç†)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä¸šåŠ¡é€»è¾‘å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚config_loader â”‚  â”‚multilevel_llmâ”‚  â”‚  validator   â”‚  â”‚
â”‚  â”‚  (é…ç½®ç®¡ç†)  â”‚  â”‚  (LLMè°ƒç”¨)   â”‚  â”‚  (æ•°æ®éªŒè¯)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚simple_6dof   â”‚  â”‚cache_service â”‚  â”‚rate_limiter  â”‚  â”‚
â”‚  â”‚ (éª¨éª¼ç³»ç»Ÿ)   â”‚  â”‚   (ç¼“å­˜)     â”‚  â”‚   (é™æµ)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚prompt_templateâ”‚  â”‚  security    â”‚                    â”‚
â”‚  â”‚ (æç¤ºè¯æ¨¡æ¿) â”‚  â”‚  (å®‰å…¨å·¥å…·)  â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LLM æ¥å…¥å±‚                             â”‚
â”‚                    LiteLLM                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  OpenAI  â”‚  â”‚Anthropic â”‚  â”‚  PerfXCloud  â”‚          â”‚
â”‚  â”‚ (GPT-4)  â”‚  â”‚(Claude-3)â”‚  â”‚   (Qwen3)    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ HTTP/HTTPS
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å¤–éƒ¨æœåŠ¡å±‚                              â”‚
â”‚          LLM API Providers                               â”‚
â”‚    (OpenAI, Anthropic, PerfXCloud, etc.)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒç»„ä»¶

### 1. é…ç½®ç®¡ç† (config_loader.py)

**èŒè´£**:
- åŠ è½½ YAML é…ç½®æ–‡ä»¶ (config.yml, llm_config.yml)
- è½¬æ¢é…ç½®ä¸ºç¯å¢ƒå˜é‡
- éªŒè¯é…ç½®å®Œæ•´æ€§
- æ”¯æŒé…ç½®çƒ­é‡è½½

**è®¾è®¡æ¨¡å¼**: å•ä¾‹æ¨¡å¼

```python
class ConfigLoader:
    @staticmethod
    def load_config()           # åŠ è½½ç³»ç»Ÿé…ç½®
    
    @staticmethod
    def load_llm_config()       # åŠ è½½ LLM é…ç½®
    
    @staticmethod
    def validate_config()       # éªŒè¯é…ç½®
    
    @staticmethod
    def setup_environment()     # è®¾ç½®ç¯å¢ƒå˜é‡
```

### 2. å¤šå±‚æ¬¡ LLM æœåŠ¡ (multilevel_llm.py)

**èŒè´£**:
- ç»Ÿä¸€ LLM è°ƒç”¨æ¥å£
- æ™ºèƒ½å¤æ‚åº¦åˆ†æ
- è‡ªé€‚åº”æ¨¡å‹é€‰æ‹©
- æ”¯æŒå¤šæä¾›å•†åˆ‡æ¢
- é”™è¯¯å¤„ç†å’Œé‡è¯•

**è®¾è®¡æ¨¡å¼**: ç­–ç•¥æ¨¡å¼ + å•ä¾‹æ¨¡å¼

```python
class MultiLevelLLMService:
    def __init__(mode='auto')          # åˆå§‹åŒ–æœåŠ¡
    def _setup_provider()              # é…ç½® LLM æä¾›å•†
    def _analyze_complexity()          # åˆ†ææ•…äº‹å¤æ‚åº¦
    def _select_model()                # é€‰æ‹©åˆé€‚æ¨¡å‹
    def generate_animation()           # ç”ŸæˆåŠ¨ç”»æ•°æ®
    def _call_llm()                    # è°ƒç”¨ LLM API
```

**æ¨¡å¼æ”¯æŒ**:
- `auto`: è‡ªåŠ¨æ¨¡å¼ï¼Œæ ¹æ®å¤æ‚åº¦é€‰æ‹©æ¨¡å‹
- `simple`: ç®€å•æ¨¡å¼ï¼Œä½¿ç”¨è½»é‡çº§æ¨¡å‹
- `complex`: å¤æ‚æ¨¡å¼ï¼Œä½¿ç”¨é«˜æ€§èƒ½æ¨¡å‹

### 3. 6è‡ªç”±åº¦éª¨éª¼ç³»ç»Ÿ (simple_6dof.py)

**èŒè´£**:
- å®šä¹‰ç«æŸ´äººéª¨éª¼ç»“æ„
- 6ä¸ªå…³èŠ‚è‡ªç”±åº¦æ§åˆ¶ï¼ˆå¤´ã€èº«ä½“ã€æ‰‹è‡‚ã€è…¿ï¼‰
- å§¿åŠ¿éªŒè¯å’Œçº¦æŸ
- åŠ¨ä½œæ’å€¼å’Œå¹³æ»‘

**å…³èŠ‚ç³»ç»Ÿ**:
```python
class Simple6DOFSkeleton:
    joints = {
        'head': (x, y),       # å¤´éƒ¨ä½ç½®
        'body': (x, y),       # èº«ä½“ä¸­å¿ƒ
        'left_arm': angle,    # å·¦è‡‚è§’åº¦
        'right_arm': angle,   # å³è‡‚è§’åº¦
        'left_leg': angle,    # å·¦è…¿è§’åº¦
        'right_leg': angle    # å³è…¿è§’åº¦
    }
```

### 4. Prompt æ¨¡æ¿ (prompt_template.py)

**èŒè´£**:
- æ„å»ºç»“æ„åŒ– Prompt
- å®šä¹‰ JSON è¾“å‡ºæ ¼å¼
- æä¾›ç¤ºä¾‹å’Œçº¦æŸ
- æ”¯æŒå¤šè¯­è¨€

```python
def get_animation_prompt(story: str, mode: str = 'auto') -> str:
    """
    ç”ŸæˆåŠ¨ç”»æç¤ºè¯
    
    Args:
        story: ç”¨æˆ·è¾“å…¥çš„æ•…äº‹æè¿°
        mode: å¤æ‚åº¦æ¨¡å¼ (auto/simple/complex)
        
    Returns:
        æ ¼å¼åŒ–çš„ prompt å­—ç¬¦ä¸²
    """
```

### 5. æ•°æ®éªŒè¯ (animation_validator.py)

**èŒè´£**:
- éªŒè¯ LLM è¾“å‡ºæ ¼å¼
- æ£€æŸ¥åæ ‡èŒƒå›´ (0-800, 0-600)
- ç¡®ä¿æ•°æ®å®Œæ•´æ€§
- è§’åº¦å’Œæ•°å€¼çº¦æŸ

**è®¾è®¡æ¨¡å¼**: Pydantic æ•°æ®æ¨¡å‹

```python
class Character(BaseModel):
    id: str
    name: str
    color: str

class Frame(BaseModel):
    duration: int           # æŒç»­æ—¶é—´ (ms)
    head: Tuple[int, int]   # å¤´éƒ¨åæ ‡
    body: Tuple[int, int]   # èº«ä½“åæ ‡
    left_arm: int          # å·¦è‡‚è§’åº¦ (-180~180)
    right_arm: int         # å³è‡‚è§’åº¦
    left_leg: int          # å·¦è…¿è§’åº¦
    right_leg: int         # å³è…¿è§’åº¦

class Scene(BaseModel):
    description: str
    frames: List[Frame]

class AnimationData(BaseModel):
    title: str
    characters: List[Character]
    scenes: List[Scene]
```

### 6. ç¼“å­˜æœåŠ¡ (cache_service.py)

**èŒè´£**:
- å†…å­˜ç¼“å­˜åŠ¨ç”»æ•°æ®
- LRU æ·˜æ±°ç­–ç•¥
- æ”¯æŒ TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰
- ç¼“å­˜ç»Ÿè®¡

```python
class CacheService:
    def __init__(max_size=100, ttl=3600)
    def get(key)                    # è·å–ç¼“å­˜
    def set(key, value)             # è®¾ç½®ç¼“å­˜
    def clear()                     # æ¸…ç©ºç¼“å­˜
    def stats()                     # ç¼“å­˜ç»Ÿè®¡
```

### 7. é™æµå™¨ (rate_limiter.py)

**èŒè´£**:
- ä»¤ç‰Œæ¡¶ç®—æ³•
- é˜²æ­¢ API æ»¥ç”¨
- æ”¯æŒå¤šå®¢æˆ·ç«¯é™æµ
- è‡ªåŠ¨æ¸…ç†è¿‡æœŸè®°å½•

```python
class RateLimiter:
    def __init__(rate=60, per=60)   # 60æ¬¡/åˆ†é’Ÿ
    def is_allowed(client_id)       # æ£€æŸ¥æ˜¯å¦å…è®¸
    def get_remaining(client_id)    # è·å–å‰©ä½™æ¬¡æ•°
```

### 8. å®‰å…¨å·¥å…· (security.py)

**èŒè´£**:
- è¾“å…¥æ¸…ç†å’ŒéªŒè¯
- XSS é˜²æŠ¤
- SQL æ³¨å…¥é˜²æŠ¤
- æ•æ„Ÿä¿¡æ¯è„±æ•

```python
class Security:
    @staticmethod
    def sanitize_input(text)        # æ¸…ç†è¾“å…¥
    
    @staticmethod
    def validate_story(story)       # éªŒè¯æ•…äº‹å†…å®¹
    
    @staticmethod
    def mask_sensitive_data(data)   # è„±æ•å¤„ç†
```

### 9. åŠ¨ç”»å¼•æ“ (animator.js)

**èŒè´£**:
- åˆ›å»º SVG å…ƒç´ 
- ç®¡ç† GSAP æ—¶é—´è½´
- æ¸²æŸ“åŠ¨ç”»
- æ’­æ”¾æ§åˆ¶

```javascript
class StickFigureAnimator {
    constructor(containerId)
    loadAnimation(data)         // åŠ è½½åŠ¨ç”»æ•°æ®
    play()                      // æ’­æ”¾
    pause()                     // æš‚åœ
    restart()                   // é‡æ–°å¼€å§‹
    setSpeed(speed)             // è®¾ç½®é€Ÿåº¦
}
```

## æ•°æ®æµ

### è¯·æ±‚æµç¨‹

```
1. ç”¨æˆ·è¾“å…¥æ•…äº‹
   â†“
2. JavaScript å‘é€ POST /api/generate
   {
     "story": "å°æ˜æ‹¿ç€åˆ€è¡¨æ¼”æ­¦æœ¯",
     "language": "zh-CN"
   }
   â†“
3. Flask è·¯ç”±æ¥æ”¶è¯·æ±‚
   â†“
4. é€Ÿç‡é™åˆ¶æ£€æŸ¥ (rate_limiter)
   â†“
5. å®‰å…¨éªŒè¯ (security)
   â†“
6. ç¼“å­˜æŸ¥è¯¢ (cache_service)
   â”œâ”€ å‘½ä¸­ â†’ ç›´æ¥è¿”å›
   â””â”€ æœªå‘½ä¸­ â†“
7. è¯»å–é…ç½® (config_loader)
   â†“
8. åˆ†æå¤æ‚åº¦ (multilevel_llm)
   â†“
9. é€‰æ‹©æ¨¡å‹ (multilevel_llm)
   â†“
10. æ„å»º Prompt (prompt_template)
   â†“
11. è°ƒç”¨ LLM (LiteLLM)
   â†“
12. AI å¤„ç†å¹¶è¿”å› JSON
   â†“
13. éªŒè¯æ•°æ® (animation_validator)
   â†“
14. åº”ç”¨éª¨éª¼çº¦æŸ (simple_6dof)
   â†“
15. å­˜å…¥ç¼“å­˜ (cache_service)
   â†“
16. è¿”å›ç»™å‰ç«¯
   â†“
17. æ¸²æŸ“åŠ¨ç”» (animator.js)
```

### æ•°æ®æ ¼å¼

**è¯·æ±‚**:
```json
{
  "story": "å°æ˜æ‹¿ç€åˆ€è¡¨æ¼”äº†ä¸€æ®µæ­¦æœ¯åŠ¨ä½œ",
  "language": "zh-CN"
}
```

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "title": "æ­¦æœ¯è¡¨æ¼”",
    "characters": [
      {
        "id": "char1",
        "name": "å°æ˜",
        "color": "#2196F3"
      }
    ],
    "scenes": [
      {
        "description": "å°æ˜æŒåˆ€è¡¨æ¼”",
        "frames": [
          {
            "duration": 500,
            "char1": {
              "head": [400, 200],
              "body": [400, 250],
              "left_arm": -45,
              "right_arm": 90,
              "left_leg": 10,
              "right_leg": -10
            }
          }
        ]
      }
    ]
  },
  "metadata": {
    "complexity": "complex",
    "model_used": "Qwen3-Next-80B-Instruct",
    "generation_time": 8.5,
    "cache_hit": false
  }
}
```

## æŠ€æœ¯é€‰å‹

### åç«¯

| ç»„ä»¶ | æŠ€æœ¯ | åŸå›  |
|------|------|------|
| Webæ¡†æ¶ | Flask 3.0 | è½»é‡çº§ï¼Œæ˜“äºæ‰©å±• |
| LLMæ¥å…¥ | LiteLLM 1.57+ | ç»Ÿä¸€æ¥å£ï¼Œæ”¯æŒ100+æä¾›å•† |
| æ•°æ®éªŒè¯ | Pydantic 2.10+ | ç±»å‹å®‰å…¨ï¼Œè‡ªåŠ¨éªŒè¯ |
| é…ç½®ç®¡ç† | PyYAML | æ˜“è¯»æ˜“å†™ï¼Œæ”¯æŒå¤æ‚ç»“æ„ |
| ç¼“å­˜ | å†…å­˜å­—å…¸ | ç®€å•é«˜æ•ˆï¼Œé€‚åˆå•æœº |
| é™æµ | ä»¤ç‰Œæ¡¶ç®—æ³• | å¹³æ»‘é™æµï¼Œæ”¯æŒçªå‘ |

### å‰ç«¯

| ç»„ä»¶ | æŠ€æœ¯ | åŸå›  |
|------|------|------|
| åŸºç¡€æ¡†æ¶ | Vanilla JS | æ— ä¾èµ–ï¼Œæ€§èƒ½æœ€ä¼˜ |
| åŠ¨ç”»å¼•æ“ | GSAP 3.12 | ä¸“ä¸šçº§ï¼Œ60fpsä¿è¯ |
| å›¾å½¢æ¸²æŸ“ | SVG | çŸ¢é‡å›¾ï¼Œæ¸…æ™°ä¸å¤±çœŸ |
| å›½é™…åŒ– | è‡ªå®šä¹‰i18n | è½»é‡ï¼Œæ»¡è¶³éœ€æ±‚ |

## è®¾è®¡åŸåˆ™

### 1. å…³æ³¨ç‚¹åˆ†ç¦»

- é…ç½®ç®¡ç†ç‹¬ç«‹äºä¸šåŠ¡é€»è¾‘
- LLM è°ƒç”¨ä¸æ•°æ®éªŒè¯åˆ†ç¦»
- å‰ç«¯å±•ç¤ºä¸åç«¯å¤„ç†è§£è€¦

### 2. å•ä¸€èŒè´£

æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½ï¼š
- `config_loader` åªè´Ÿè´£é…ç½®
- `multilevel_llm` åªè´Ÿè´£ LLM è°ƒç”¨
- `animator.js` åªè´Ÿè´£åŠ¨ç”»æ¸²æŸ“

### 3. å¼€æ”¾å°é—­åŸåˆ™

- å¯¹æ‰©å±•å¼€æ”¾ï¼šæ˜“äºæ·»åŠ æ–° LLM æä¾›å•†
- å¯¹ä¿®æ”¹å°é—­ï¼šæ ¸å¿ƒé€»è¾‘ç¨³å®š

### 4. ä¾èµ–å€’ç½®

- ä¾èµ–æŠ½è±¡ï¼ˆLiteLLM æ¥å£ï¼‰
- ä¸ä¾èµ–å…·ä½“å®ç°ï¼ˆç‰¹å®š LLM APIï¼‰

### 5. æ¥å£éš”ç¦»

- æœ€å°åŒ–æ¥å£æš´éœ²
- API è®¾è®¡ç®€æ´æ˜äº†

## æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°

- âœ… **é…ç½®é¢„åŠ è½½**: å¯åŠ¨æ—¶ä¸€æ¬¡æ€§åŠ è½½
- âœ… **LLM æœåŠ¡å•ä¾‹**: é¿å…é‡å¤åˆå§‹åŒ–
- âœ… **å†…å­˜ç¼“å­˜**: LRUç­–ç•¥ï¼Œå‘½ä¸­ç‡85%+
- âœ… **SVG å…ƒç´ å¤ç”¨**: å‡å°‘ DOM æ“ä½œ
- âœ… **GSAP ç¡¬ä»¶åŠ é€Ÿ**: åˆ©ç”¨ GPU æ¸²æŸ“
- âœ… **æ™ºèƒ½æ¨¡å‹é€‰æ‹©**: ç®€å•åœºæ™¯ç”¨è½»é‡æ¨¡å‹

### å¾…ä¼˜åŒ–

- ğŸ”„ **Redis ç¼“å­˜**: æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²
- ğŸ”„ **CDN åŠ é€Ÿ**: é™æ€èµ„æºåŠ é€Ÿ
- ğŸ”„ **æµå¼å“åº”**: å®æ—¶è¿”å›ç”Ÿæˆè¿‡ç¨‹
- ğŸ”„ **WebSocket**: åŒå‘é€šä¿¡ï¼Œé™ä½å»¶è¿Ÿ
- ğŸ”„ **é¢„æ¸²æŸ“**: å¸¸è§åœºæ™¯é¢„ç”Ÿæˆ

## å®‰å…¨æ€§

### å·²å®ç°

- âœ… **é…ç½®åˆ†ç¦»**: æ•æ„Ÿä¿¡æ¯ç‹¬ç«‹æ–‡ä»¶
- âœ… **è¾“å…¥éªŒè¯**: é•¿åº¦ã€å†…å®¹æ£€æŸ¥
- âœ… **æ•°æ®éªŒè¯**: Pydantic ç±»å‹æ£€æŸ¥
- âœ… **CORS é…ç½®**: è·¨åŸŸå®‰å…¨æ§åˆ¶
- âœ… **é€Ÿç‡é™åˆ¶**: é˜²æ­¢ API æ»¥ç”¨
- âœ… **é”™è¯¯è„±æ•**: ä¸æš´éœ²å†…éƒ¨ä¿¡æ¯

### å»ºè®®å¢å¼º

- ğŸ” **ç”¨æˆ·è®¤è¯**: JWT Token
- ğŸ” **HTTPS**: SSL/TLS åŠ å¯†
- ğŸ” **API å¯†é’¥**: è®¿é—®æ§åˆ¶
- ğŸ” **å†…å®¹è¿‡æ»¤**: æ•æ„Ÿè¯æ£€æŸ¥
- ğŸ” **å®¡è®¡æ—¥å¿—**: æ“ä½œè¿½è¸ª

## å¯é æ€§

### é”™è¯¯å¤„ç†

```python
try:
    # LLM è°ƒç”¨
    response = llm_service.generate()
except TimeoutError:
    # è¶…æ—¶é‡è¯•
    response = retry_with_backoff()
except ValidationError:
    # æ•°æ®éªŒè¯å¤±è´¥
    return error_response("Invalid data")
except Exception as e:
    # æœªçŸ¥é”™è¯¯
    logger.error(f"Unexpected error: {e}")
    return error_response("Internal error")
```

### æ—¥å¿—è®°å½•

```python
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
```

### ç›‘æ§æŒ‡æ ‡

- API å“åº”æ—¶é—´
- LLM è°ƒç”¨æˆåŠŸç‡
- ç¼“å­˜å‘½ä¸­ç‡
- é”™è¯¯ç‡å’Œç±»å‹
- ç”¨æˆ·è¯·æ±‚é¢‘ç‡

## æ‰©å±•æ€§

### æ·»åŠ æ–° LLM æä¾›å•†

1. åœ¨ `config.yml` æ·»åŠ é…ç½®:
```yaml
llm:
  new_provider:
    model: "model-name"
    api_base: "https://api.example.com"
```

2. åœ¨ `llm_config.yml` æ·»åŠ å¯†é’¥:
```yaml
new_provider:
  api_key: "your-key"
```

3. åœ¨ `multilevel_llm.py` æ·»åŠ è®¾ç½®æ–¹æ³•ï¼ˆLiteLLMé€šå¸¸è‡ªåŠ¨æ”¯æŒï¼‰

### æ·»åŠ æ–°åŠŸèƒ½

1. **åç«¯è·¯ç”±**: åœ¨ `app.py` æ·»åŠ 
2. **å‰ç«¯é€»è¾‘**: åœ¨ `app.js` æ·»åŠ 
3. **åŠ¨ç”»åŠŸèƒ½**: åœ¨ `animator.js` æ‰©å±•

### æ‰©å±•éª¨éª¼ç³»ç»Ÿ

åœ¨ `simple_6dof.py` æ·»åŠ æ–°å…³èŠ‚ï¼š

```python
class Enhanced6DOFSkeleton(Simple6DOFSkeleton):
    def __init__(self):
        super().__init__()
        self.joints['left_hand'] = (0, 0)
        self.joints['right_hand'] = (0, 0)
```

## éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ

```bash
python app.py
# å•è¿›ç¨‹ï¼Œè°ƒè¯•æ¨¡å¼ï¼Œç«¯å£5001
```

### ç”Ÿäº§ç¯å¢ƒ

```bash
gunicorn -w 4 -b 0.0.0.0:5001 app:app
# 4ä¸ªworkerè¿›ç¨‹ï¼Œç”Ÿäº§æ¨¡å¼
```

### Docker éƒ¨ç½²ï¼ˆè§„åˆ’ä¸­ï¼‰

```dockerfile
FROM python:3.9-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5001", "app:app"]
```

### äº‘éƒ¨ç½²ï¼ˆè§„åˆ’ä¸­ï¼‰

- AWS: EC2 + ELB + CloudFront
- Azure: App Service + CDN
- GCP: Cloud Run + Cloud CDN

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

- `test_llm_service.py`: LLM æœåŠ¡æµ‹è¯•
- `test_skeleton.py`: éª¨éª¼ç³»ç»Ÿæµ‹è¯•
- `test_validator.py`: æ•°æ®éªŒè¯æµ‹è¯•
- `test_cache_ratelimit.py`: ç¼“å­˜å’Œé™æµæµ‹è¯•
- `test_security.py`: å®‰å…¨åŠŸèƒ½æµ‹è¯•

### é›†æˆæµ‹è¯•

- `test_integration.py`: ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•

### è¦†ç›–ç‡ç›®æ ‡

- æ ¸å¿ƒæ¨¡å—: 90%+
- æ•´ä½“è¦†ç›–: 80%+

## æ›´å¤šæ–‡æ¡£

- [é…ç½®æŒ‡å—](CONFIG.md) - è¯¦ç»†é…ç½®è¯´æ˜
- [API æ–‡æ¡£](API.md) - REST API å‚è€ƒ
- [å¼€å‘æ–‡æ¡£](DEVELOPMENT.md) - å¼€å‘æŒ‡å—
- [ç”Ÿäº§éƒ¨ç½²](PRODUCTION_DEPLOYMENT.md) - éƒ¨ç½²æŒ‡å—
